{% extends 'base.html' %}
{% load static %}
{% block content %}

<link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css'>
<link rel="stylesheet" href="{% static 'Usuario/user.css' %}">

<div class="container">

    <div class="row gutters">
    <div class="col-xl-3 col-lg-3 col-md-12 col-sm-12 col-12">
    <div class="card h-100">
        <div class="card-body">
            <div class="account-settings">
                <div class="user-profile">
                    <div class="user-avatar">
                        <img src="{% static 'Usuario/default-user.png' %}">
                    </div>
                    <a href="{% url 'editar_usuario'%}">Editar datos personales</a>
                    <h5 class="user-name">{{request.user.username}}</h5>
                    <h6 class="user-email">{{request.user.email}}</h6>
                </div>
                <div class="about">
                    
                </div>
            </div>
        </div>
    </div>
    </div>


    <div class="col-xl-9 col-lg-9 col-md-12 col-sm-12 col-12">
    <div class="card h-100">
        <div class="card-body">

            <div class="row gutters">
                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                    <h2 class="mb-2 text-primary">DATOS PERSONALES</h2>
                </div>
            
                <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                    <div class="form-group">
                        <label for="fullName" class="form-label"><h5>Nombre Completo</h5></label>
                        <p>{{request.user.nombre_completo}}</p>
                    </div>
                </div>
            
                <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                    <div class="form-group">
                        <label for="phone" class="form-label"><h5>Telefono</h5></label>
                        <p>{{request.user.telefono}}</p>
                    </div>
                </div>

                <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                    <div class="form-group">
                        <label for="nationality" class="form-label"><h5> Nacionalidad</h5></label>
                        <p>{{request.user.nacionalidad}}</p>
                    </div>
                </div>

            </div>
            
            <div class="row gutters">
                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                    <h2 class="mt-3 mb-2 text-primary">DIRECCION</h2>
                </div>
            
                <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                    <div class="form-group">
                        <label for="street" class="form-label"><h5> Calle y Número</h5></label>
                        <p>{{request.user.direccion}}</p>
                    </div>
                </div>
            
                <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                    <div class="form-group">
                        <label for="city" class="form-label"><h5>Ciudad</h5></label>
                        <p>{{request.user.ciudad}}</p>
                    </div>
                </div>
            
                <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                    <div class="form-group">
                        <label for="state" class="form-label"><h5>Provincia / Estado</h5></label>
                        <p>{{request.user.provincia}}</p>
                    </div>
                </div>
            
                <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
                    <div class="form-group">
                        <label for="zip" class="form-label"><h5>Codigo Postal</h5></label>
                        <p>{{request.user.codigo_postal}}</p>
                    </div>
                </div>
            </div>
        
    </div>
    </div>
    </div>

    <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 custom-size">
        <div class="card h-100">
            <div class="card-body">
                
                <h4>Pedidos Realizados</h4>
                <div class="user-purchases">
                    <table class="displayed-table">
                        <tr>
                            <th>Numero De Compra</th>
                            <th>Estado</th>
                            <th>Monto Total</th>
                            <th>Fecha</th>
                            <th> </th>
                        </tr>
                        {% for pedido in pedidos %}
                            <tr>
                                <td>{{ pedido.numero_compra }}</td>
                                <td>{{ pedido.estado }}</td>
                                <td>{{ pedido.monto_total }}</td>
                                <td>{{ pedido.fecha }}</td>
                                <td>
                                    <a href="{% url 'detalle' pedido.numero_compra %}">más detalles</a>
                            </td>
                            {% empty %}
                                <li>No hay pedidos disponibles.</li>
                            </tr>
                        {% endfor %}
                    </table>
                </div>
                <h4>Reseñas Realizadas</h4>
                <div class="user-reviews">
                    <table class="displayed-table">
                        <tr>
                            <th>Libro</th>
                            <th>Reseña</th>
                            <th>Puntaje</th>
                            <th>Fecha</th>
                        </tr>
                        {% for reseña in reseñas %}
                        <tr>
                            <td>{{ reseña.libro.titulo }}</td>
                            <td>{{ reseña.comentario }}</td>
                            <td>{{ reseña.estrellas }}</td>
                            <td>{{ reseña.fecha }}</td>
                            {% empty %}
                            <li>No hay pedidos disponibles.</li>
                        </tr>
                        {% endfor %}
                    </table>
                </div>

            </div>
        </div>
    </div>

</div>

{% endblock %}
    